<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trades — Filtro único (Mockup)</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  body { font-family: 'Nunito', sans-serif; background: #FAFAFA; color: #171717; display: flex; min-height: 100vh; }

  /* ── Sidebar ── */
  .sidebar {
    width: 240px; background: #fff; border-right: 1px solid #E5E5E5;
    display: flex; flex-direction: column; flex-shrink: 0;
  }
  .sidebar-logo {
    display: flex; align-items: center; gap: 10px;
    padding: 18px 20px; border-bottom: 1px solid #F5F5F5;
  }
  .logo-icon { width: 28px; height: 28px; }
  .logo-text { font-weight: 800; font-size: 17px; letter-spacing: -0.3px; }
  .logo-text span { color: #737373; font-weight: 600; }
  .nav { flex: 1; padding: 12px 8px; display: flex; flex-direction: column; gap: 2px; }
  .nav-item {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 12px; border-radius: 8px; font-size: 14px; font-weight: 500;
    color: #737373; cursor: pointer; text-decoration: none;
  }
  .nav-item:hover { background: #F5F5F5; color: #404040; }
  .nav-item.active { background: #F5F5F5; color: #171717; font-weight: 700; }
  .nav-item.disabled { color: #D4D4D4; cursor: not-allowed; }
  .nav-icon { width: 20px; height: 20px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
  .sidebar-footer {
    border-top: 1px solid #F5F5F5; padding: 12px;
    display: flex; align-items: center; gap: 10px;
  }
  .avatar {
    width: 32px; height: 32px; border-radius: 50%; background: #171717;
    color: #fff; display: flex; align-items: center; justify-content: center;
    font-size: 13px; font-weight: 700; flex-shrink: 0;
  }
  .footer-info { flex: 1; min-width: 0; }
  .footer-name { font-size: 13px; font-weight: 600; color: #171717; }
  .footer-email { font-size: 11px; color: #A3A3A3; }
  .logout-btn { background: none; border: none; cursor: pointer; color: #A3A3A3; padding: 6px; border-radius: 6px; }

  /* ── Main ── */
  .main { flex: 1; overflow: auto; padding: 32px; }
  .page-header { margin-bottom: 32px; }
  .page-title { font-size: 24px; font-weight: 800; color: #171717; }
  .page-subtitle { font-size: 13px; color: #A3A3A3; margin-top: 2px; }

  /* ── Metrics ── */
  .metrics { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 32px; }
  .metric-card {
    background: #fff; border: 1px solid #E5E5E5; border-radius: 12px;
    padding: 20px; display: flex; flex-direction: column; gap: 12px;
  }
  .metric-header { display: flex; align-items: center; justify-content: space-between; }
  .metric-label { font-size: 11px; font-weight: 600; color: #A3A3A3; text-transform: uppercase; letter-spacing: 0.05em; }
  .metric-icon { color: #D4D4D4; }
  .metric-value { font-family: 'JetBrains Mono', monospace; font-size: 28px; font-weight: 600; color: #171717; }
  .metric-value.positive { color: #16A34A; }
  .metric-value.negative { color: #DC2626; }

  /* ── Card ── */
  .card { background: #fff; border: 1px solid #E5E5E5; border-radius: 20px; box-shadow: 0 1px 4px rgba(0,0,0,0.04); }
  .card-header {
    display: flex; align-items: center; justify-content: space-between;
    padding: 20px 24px; border-bottom: 1px solid #F5F5F5;
    gap: 12px; flex-wrap: wrap;
  }
  .card-header-left { display: flex; align-items: center; gap: 16px; }
  .card-title { font-size: 17px; font-weight: 700; color: #171717; white-space: nowrap; }

  /* ── Filter bar ── */
  .filter-bar { display: flex; align-items: center; gap: 8px; }
  .filter-btn {
    padding: 6px 14px; border-radius: 8px; font-size: 13px; font-weight: 600;
    cursor: pointer; border: 1px solid #E5E5E5; background: #fff; color: #737373;
    font-family: 'Nunito', sans-serif; transition: all 0.15s;
    display: flex; align-items: center; gap: 5px;
  }
  .filter-btn:hover { background: #F5F5F5; color: #404040; }
  .filter-btn.active { background: #171717; color: #fff; border-color: #171717; }
  .filter-badge {
    font-size: 10px; font-weight: 700;
    padding: 1px 5px; border-radius: 999px;
    background: rgba(255,255,255,0.2); color: inherit;
  }
  .filter-btn:not(.active) .filter-badge { background: #F5F5F5; color: #A3A3A3; }

  /* ── Table ── */
  .table-wrap { overflow-x: auto; }
  table { width: 100%; border-collapse: collapse; font-size: 13px; }
  thead tr { border-bottom: 1px solid #F5F5F5; }
  th {
    padding: 12px 20px; text-align: left;
    font-size: 11px; font-weight: 600; color: #A3A3A3;
    text-transform: uppercase; letter-spacing: 0.05em; white-space: nowrap;
  }
  th.right { text-align: right; }
  tbody tr { border-bottom: 1px solid #FAFAFA; }
  tbody tr:last-child { border-bottom: none; }
  tbody tr:hover { background: #FAFAFA; }
  td { padding: 14px 20px; vertical-align: middle; }
  td.right { text-align: right; }
  .ticker { font-family: 'JetBrains Mono', monospace; font-weight: 700; font-size: 14px; color: #171717; }
  .ticker-name { font-size: 11px; color: #A3A3A3; margin-top: 1px; }
  .mono { font-family: 'JetBrains Mono', monospace; font-weight: 500; }
  .positive { color: #16A34A; }
  .negative { color: #DC2626; }
  .muted { color: #D4D4D4; }

  /* ── Status badges ── */
  .badge {
    display: inline-flex; align-items: center; gap: 4px;
    padding: 4px 10px; border-radius: 999px; font-size: 11px; font-weight: 700;
    border: 1px solid transparent; white-space: nowrap;
  }
  .badge-open { background: #EFF6FF; color: #2563EB; border-color: #DBEAFE; }
  .badge-closed { background: #F5F5F5; color: #525252; border-color: #E5E5E5; }
  .badge-win { background: #F0FDF4; color: #16A34A; border-color: #DCFCE7; }
  .badge-loss { background: #FEF2F2; color: #DC2626; border-color: #FEE2E2; }
  .badge-neutral { background: #FAFAFA; color: #A3A3A3; border-color: #E5E5E5; }
  .dot { width: 6px; height: 6px; border-radius: 50%; flex-shrink: 0; }
  .dot-open { background: #2563EB; }
  .dot-closed { background: #A3A3A3; }

  /* ── Buttons ── */
  .btn {
    display: inline-flex; align-items: center; gap: 6px;
    padding: 8px 16px; border-radius: 8px; font-size: 13px; font-weight: 600;
    cursor: pointer; border: none; transition: all 0.15s; font-family: 'Nunito', sans-serif;
  }
  .btn-primary { background: #171717; color: #fff; }
  .btn-primary:hover { background: #262626; }
  .btn-ghost { background: transparent; color: #737373; border: 1px solid #E5E5E5; }
  .btn-ghost:hover { background: #F5F5F5; color: #171717; }
  .btn-danger-ghost { background: transparent; color: #DC2626; border: 1px solid #FEE2E2; }
  .btn-danger-ghost:hover { background: #FEF2F2; }
  .btn-sm { padding: 5px 10px; font-size: 12px; }
  .btn-icon { width: 30px; height: 30px; padding: 0; justify-content: center; border-radius: 6px; }
  .actions { display: flex; align-items: center; justify-content: flex-end; gap: 6px; }

  /* ── Modal ── */
  .modal-backdrop {
    position: fixed; inset: 0; background: rgba(0,0,0,0.18);
    backdrop-filter: blur(4px); z-index: 50;
    display: flex; align-items: center; justify-content: center; padding: 16px;
  }
  .modal {
    background: #fff; border: 1px solid #E5E5E5; border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1); width: 100%; max-width: 440px; padding: 28px;
  }
  .modal-title { font-size: 17px; font-weight: 800; color: #171717; margin-bottom: 20px; display: flex; align-items: center; justify-content: space-between; }
  .modal-close { background: none; border: none; cursor: pointer; color: #A3A3A3; font-size: 20px; padding: 2px; }
  .form-group { margin-bottom: 16px; }
  .form-label { display: block; font-size: 13px; font-weight: 600; color: #404040; margin-bottom: 6px; }
  .form-label span { color: #A3A3A3; font-weight: 400; font-size: 12px; }
  .form-input {
    width: 100%; padding: 10px 12px; border: 1px solid #E5E5E5; border-radius: 8px;
    font-size: 14px; font-family: 'Nunito', sans-serif; color: #171717; outline: none; transition: border 0.15s;
  }
  .form-input:focus { border-color: #171717; box-shadow: 0 0 0 3px rgba(23,23,23,0.06); }
  .form-input.mono { font-family: 'JetBrains Mono', monospace; }
  .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .form-actions { display: flex; justify-content: flex-end; gap: 8px; margin-top: 8px; }
  .direction-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 8px; }
  .direction-opt {
    border: 1px solid #E5E5E5; border-radius: 8px; padding: 10px 8px;
    text-align: center; cursor: pointer; font-size: 13px; font-weight: 600; color: #737373; transition: all 0.15s;
  }
  .direction-opt:hover { background: #F5F5F5; }
  .direction-opt.selected-up { border-color: #16A34A; background: #F0FDF4; color: #16A34A; }
  .direction-opt.selected-down { border-color: #DC2626; background: #FEF2F2; color: #DC2626; }
  .direction-opt.selected-sideways { border-color: #A3A3A3; background: #F5F5F5; color: #A3A3A3; }
  .direction-icon { font-size: 16px; margin-bottom: 3px; }
</style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <div class="sidebar-logo">
    <svg class="logo-icon" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle stroke="#171717" stroke-width="2" cx="20" cy="20" r="15"/>
      <circle fill="#171717" cx="20" cy="20" r="4"/>
      <circle fill="#171717" cx="20" cy="8" r="1.5"/>
      <circle fill="#171717" cx="32" cy="20" r="1.5"/>
      <circle fill="#171717" cx="20" cy="32" r="1.5"/>
      <circle fill="#171717" cx="8" cy="20" r="1.5"/>
    </svg>
    <div class="logo-text">Trading <span>Spot</span></div>
  </div>
  <nav class="nav">
    <a class="nav-item" href="#">
      <span class="nav-icon"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/></svg></span>
      Dashboard
    </a>
    <a class="nav-item disabled" href="#">
      <span class="nav-icon"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></span>
      Watchlist
    </a>
    <a class="nav-item active" href="#">
      <span class="nav-icon"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg></span>
      Trades
    </a>
    <a class="nav-item disabled" href="#">
      <span class="nav-icon"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></span>
      Analytics
    </a>
    <a class="nav-item disabled" href="#">
      <span class="nav-icon"><svg width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14M4.93 4.93a10 10 0 0 0 0 14.14"/></svg></span>
      Configuración
    </a>
  </nav>
  <div class="sidebar-footer">
    <div class="avatar">J</div>
    <div class="footer-info">
      <div class="footer-name">Juan García</div>
      <div class="footer-email">juan@gmail.com</div>
    </div>
    <button class="logout-btn">
      <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
    </button>
  </div>
</div>

<!-- Main -->
<main class="main">
  <div style="display:flex; align-items:flex-start; justify-content:space-between; margin-bottom:32px;">
    <div>
      <div class="page-title">Trades</div>
      <div class="page-subtitle">Semana 18 feb – 22 feb</div>
    </div>
    <button class="btn btn-primary" onclick="document.getElementById('modal-buy').style.display='flex'">
      <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>
      Registrar trade
    </button>
  </div>

  <!-- Metrics -->
  <div class="metrics">
    <div class="metric-card">
      <div class="metric-header"><span class="metric-label">P&L neto</span><span class="metric-icon"><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="12" y1="1" x2="12" y2="23"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg></span></div>
      <div class="metric-value positive">+$1,240.50</div>
    </div>
    <div class="metric-card">
      <div class="metric-header"><span class="metric-label">Comisiones</span><span class="metric-icon"><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg></span></div>
      <div class="metric-value">$87.30</div>
    </div>
    <div class="metric-card">
      <div class="metric-header"><span class="metric-label">Win rate</span><span class="metric-icon"><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><line x1="19" y1="5" x2="5" y2="19"/><circle cx="6.5" cy="6.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/></svg></span></div>
      <div class="metric-value positive">68.0%</div>
    </div>
    <div class="metric-card">
      <div class="metric-header"><span class="metric-label">Operaciones</span><span class="metric-icon"><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/></svg></span></div>
      <div class="metric-value">15</div>
    </div>
  </div>

  <!-- Trades card — single table with filters -->
  <div class="card">
    <div class="card-header">
      <div class="card-header-left">
        <div class="card-title">Historial</div>
        <div class="filter-bar">
          <button class="filter-btn active" onclick="filterTrades('all', this)">
            Todas <span class="filter-badge">15</span>
          </button>
          <button class="filter-btn" onclick="filterTrades('open', this)">
            <span class="dot dot-open"></span> Abiertas <span class="filter-badge">3</span>
          </button>
          <button class="filter-btn" onclick="filterTrades('closed', this)">
            <span class="dot dot-closed"></span> Cerradas <span class="filter-badge">12</span>
          </button>
        </div>
      </div>
    </div>

    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Ticker</th>
            <th>Estado</th>
            <th>Compra</th>
            <th>Venta</th>
            <th class="right">Precio C.</th>
            <th class="right">Precio V.</th>
            <th class="right">P&L neto</th>
            <th class="right">ROI</th>
            <th class="right">Acciones</th>
          </tr>
        </thead>
        <tbody id="trades-body">
          <!-- Open trades -->
          <tr class="trade-row open">
            <td><div class="ticker">AAPL</div><div class="ticker-name">Apple Inc.</div></td>
            <td><span class="badge badge-open"><span class="dot dot-open"></span> Abierta</span></td>
            <td class="mono" style="color:#737373; font-size:13px">14 feb</td>
            <td class="muted">—</td>
            <td class="mono right">$224.50</td>
            <td class="muted right">—</td>
            <td class="muted right">—</td>
            <td class="muted right">—</td>
            <td>
              <div class="actions">
                <button class="btn btn-ghost btn-sm" onclick="document.getElementById('modal-sell').style.display='flex'">Cerrar</button>
                <button class="btn btn-icon btn-danger-ghost" title="Eliminar" style="font-size:16px">×</button>
              </div>
            </td>
          </tr>
          <tr class="trade-row open">
            <td><div class="ticker">NVDA</div><div class="ticker-name">NVIDIA Corp.</div></td>
            <td><span class="badge badge-open"><span class="dot dot-open"></span> Abierta</span></td>
            <td class="mono" style="color:#737373; font-size:13px">17 feb</td>
            <td class="muted">—</td>
            <td class="mono right">$875.20</td>
            <td class="muted right">—</td>
            <td class="muted right">—</td>
            <td class="muted right">—</td>
            <td>
              <div class="actions">
                <button class="btn btn-ghost btn-sm" onclick="document.getElementById('modal-sell').style.display='flex'">Cerrar</button>
                <button class="btn btn-icon btn-danger-ghost" title="Eliminar" style="font-size:16px">×</button>
              </div>
            </td>
          </tr>
          <tr class="trade-row open">
            <td><div class="ticker">TSLA</div></td>
            <td><span class="badge badge-open"><span class="dot dot-open"></span> Abierta</span></td>
            <td class="mono" style="color:#737373; font-size:13px">18 feb</td>
            <td class="muted">—</td>
            <td class="mono right">$245.80</td>
            <td class="muted right">—</td>
            <td class="muted right">—</td>
            <td class="muted right">—</td>
            <td>
              <div class="actions">
                <button class="btn btn-ghost btn-sm" onclick="document.getElementById('modal-sell').style.display='flex'">Cerrar</button>
                <button class="btn btn-icon btn-danger-ghost" title="Eliminar" style="font-size:16px">×</button>
              </div>
            </td>
          </tr>
          <!-- Closed trades -->
          <tr class="trade-row closed">
            <td><div class="ticker">MSFT</div></td>
            <td><span class="badge badge-closed"><span class="dot dot-closed"></span> Cerrada</span></td>
            <td class="mono" style="color:#737373; font-size:13px">10 feb</td>
            <td class="mono" style="color:#737373; font-size:13px">14 feb</td>
            <td class="mono right">$380.00</td>
            <td class="mono right">$412.50</td>
            <td class="mono right positive">+$318.75</td>
            <td class="mono right positive">+8.4%</td>
            <td><div class="actions"><span class="badge badge-win">✓ Win</span></div></td>
          </tr>
          <tr class="trade-row closed">
            <td><div class="ticker">AMZN</div></td>
            <td><span class="badge badge-closed"><span class="dot dot-closed"></span> Cerrada</span></td>
            <td class="mono" style="color:#737373; font-size:13px">5 feb</td>
            <td class="mono" style="color:#737373; font-size:13px">12 feb</td>
            <td class="mono right">$195.20</td>
            <td class="mono right">$188.40</td>
            <td class="mono right negative">-$68.00</td>
            <td class="mono right negative">-3.5%</td>
            <td><div class="actions"><span class="badge badge-loss">✗ Loss</span></div></td>
          </tr>
          <tr class="trade-row closed">
            <td><div class="ticker">GOOGL</div></td>
            <td><span class="badge badge-closed"><span class="dot dot-closed"></span> Cerrada</span></td>
            <td class="mono" style="color:#737373; font-size:13px">3 feb</td>
            <td class="mono" style="color:#737373; font-size:13px">10 feb</td>
            <td class="mono right">$175.30</td>
            <td class="mono right">$191.20</td>
            <td class="mono right positive">+$154.50</td>
            <td class="mono right positive">+9.1%</td>
            <td><div class="actions"><span class="badge badge-win">✓ Win</span></div></td>
          </tr>
          <tr class="trade-row closed">
            <td><div class="ticker">META</div></td>
            <td><span class="badge badge-closed"><span class="dot dot-closed"></span> Cerrada</span></td>
            <td class="mono" style="color:#737373; font-size:13px">28 ene</td>
            <td class="mono" style="color:#737373; font-size:13px">5 feb</td>
            <td class="mono right">$612.00</td>
            <td class="mono right">$658.40</td>
            <td class="mono right positive">+$459.00</td>
            <td class="mono right positive">+7.6%</td>
            <td><div class="actions"><span class="badge badge-win">✓ Win</span></div></td>
          </tr>
          <tr class="trade-row closed">
            <td><div class="ticker">SPY</div></td>
            <td><span class="badge badge-closed"><span class="dot dot-closed"></span> Cerrada</span></td>
            <td class="mono" style="color:#737373; font-size:13px">20 ene</td>
            <td class="mono" style="color:#737373; font-size:13px">28 ene</td>
            <td class="mono right">$582.10</td>
            <td class="mono right">$571.30</td>
            <td class="mono right negative">-$108.00</td>
            <td class="mono right negative">-1.9%</td>
            <td><div class="actions"><span class="badge badge-neutral">— Sin pred.</span></div></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</main>

<!-- Modal: Registrar compra -->
<div id="modal-buy" class="modal-backdrop" style="display:none" onclick="if(event.target===this)this.style.display='none'">
  <div class="modal">
    <div class="modal-title">
      Registrar compra
      <button class="modal-close" onclick="document.getElementById('modal-buy').style.display='none'">×</button>
    </div>
    <div class="form-group">
      <label class="form-label">Ticker <span>*</span></label>
      <input class="form-input mono" type="text" placeholder="Ej: AAPL" value="">
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Precio compra <span>*</span></label>
        <input class="form-input mono" type="number" placeholder="0.00">
      </div>
      <div class="form-group">
        <label class="form-label">Cantidad <span>*</span></label>
        <input class="form-input mono" type="number" placeholder="0">
      </div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Comisión <span>(opcional)</span></label>
        <input class="form-input mono" type="number" placeholder="0.00">
      </div>
      <div class="form-group">
        <label class="form-label">Fecha <span>(opcional)</span></label>
        <input class="form-input" type="date" value="2026-02-18">
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Dirección esperada <span>(opcional)</span></label>
      <div class="direction-grid">
        <div class="direction-opt" onclick="selectDir(this,'up')"><div class="direction-icon">↑</div><div>Alcista</div></div>
        <div class="direction-opt" onclick="selectDir(this,'down')"><div class="direction-icon">↓</div><div>Bajista</div></div>
        <div class="direction-opt" onclick="selectDir(this,'sideways')"><div class="direction-icon">→</div><div>Lateral</div></div>
      </div>
    </div>
    <div class="form-actions">
      <button class="btn btn-ghost" onclick="document.getElementById('modal-buy').style.display='none'">Cancelar</button>
      <button class="btn btn-primary">Registrar compra</button>
    </div>
  </div>
</div>

<!-- Modal: Cerrar trade -->
<div id="modal-sell" class="modal-backdrop" style="display:none" onclick="if(event.target===this)this.style.display='none'">
  <div class="modal">
    <div class="modal-title">
      Cerrar trade — <span style="font-family:'JetBrains Mono',monospace;font-size:15px">AAPL</span>
      <button class="modal-close" onclick="document.getElementById('modal-sell').style.display='none'">×</button>
    </div>
    <div style="background:#FAFAFA; border:1px solid #F5F5F5; border-radius:10px; padding:14px; margin-bottom:20px; display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; font-size:12px;">
      <div><div style="color:#A3A3A3; margin-bottom:2px">Precio compra</div><div class="mono" style="font-weight:600">$224.50</div></div>
      <div><div style="color:#A3A3A3; margin-bottom:2px">Cantidad</div><div class="mono" style="font-weight:600">10 acc.</div></div>
      <div><div style="color:#A3A3A3; margin-bottom:2px">Invertido</div><div class="mono" style="font-weight:600">$2,250.75</div></div>
    </div>
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">Precio venta <span>*</span></label>
        <input class="form-input mono" type="number" placeholder="0.00" id="sell-price" oninput="calcPnl()">
      </div>
      <div class="form-group">
        <label class="form-label">Comisión <span>(opcional)</span></label>
        <input class="form-input mono" type="number" placeholder="0.00" id="sell-comm" oninput="calcPnl()">
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Fecha venta <span>(opcional)</span></label>
      <input class="form-input" type="date" value="2026-02-18">
    </div>
    <div id="pnl-preview" style="background:#F5F5F5; border:1px solid #E5E5E5; border-radius:10px; padding:14px; margin-bottom:20px; display:grid; grid-template-columns:1fr 1fr; gap:8px; font-size:12px;">
      <div><div style="color:#A3A3A3; margin-bottom:2px">P&L estimado</div><div class="mono" id="pnl-val" style="font-weight:700; font-size:15px; color:#D4D4D4">—</div></div>
      <div><div style="color:#A3A3A3; margin-bottom:2px">ROI estimado</div><div class="mono" id="roi-val" style="font-weight:700; font-size:15px; color:#D4D4D4">—</div></div>
    </div>
    <div class="form-actions">
      <button class="btn btn-ghost" onclick="document.getElementById('modal-sell').style.display='none'">Cancelar</button>
      <button class="btn btn-primary">Cerrar trade</button>
    </div>
  </div>
</div>

<script>
  function filterTrades(filter, btn) {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.trade-row').forEach(row => {
      if (filter === 'all') row.style.display = '';
      else row.style.display = row.classList.contains(filter) ? '' : 'none';
    });
  }

  function selectDir(el, dir) {
    document.querySelectorAll('.direction-opt').forEach(o => o.className = 'direction-opt');
    el.classList.add('selected-' + dir);
  }

  function calcPnl() {
    const sellPrice = parseFloat(document.getElementById('sell-price').value) || 0;
    const commission = parseFloat(document.getElementById('sell-comm').value) || 0;
    const buyPrice = 224.50, shares = 10, buyComm = 2.25;
    const preview = document.getElementById('pnl-preview');
    const pnlEl = document.getElementById('pnl-val');
    const roiEl = document.getElementById('roi-val');
    if (sellPrice <= 0) {
      preview.style.background = '#F5F5F5';
      preview.style.borderColor = '#E5E5E5';
      pnlEl.style.color = '#D4D4D4'; pnlEl.textContent = '—';
      roiEl.style.color = '#D4D4D4'; roiEl.textContent = '—';
      return;
    }
    const pnl = (sellPrice - buyPrice) * shares - commission - buyComm;
    const invested = buyPrice * shares + buyComm;
    const roi = (pnl / invested) * 100;
    const pos = pnl >= 0;
    preview.style.background = pos ? '#F0FDF4' : '#FEF2F2';
    preview.style.borderColor = pos ? '#DCFCE7' : '#FEE2E2';
    pnlEl.style.color = pos ? '#16A34A' : '#DC2626';
    roiEl.style.color = pos ? '#16A34A' : '#DC2626';
    pnlEl.textContent = (pos ? '+' : '') + '$' + pnl.toFixed(2);
    roiEl.textContent = (pos ? '+' : '') + roi.toFixed(2) + '%';
  }

  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') document.querySelectorAll('.modal-backdrop').forEach(m => m.style.display = 'none');
  });
</script>
</body>
</html>
